# AI è‹±æ–‡å­¸ç¿’ç³»çµ± v1.2.0

ä¸€å€‹åŸºæ–¼ Google Gemini AI çš„è‹±æ–‡å­¸ç¿’ç³»çµ±ï¼Œæä¾›æ™ºèƒ½çŸ­æ–‡ç”Ÿæˆã€èªéŸ³åˆæˆå’Œä¸­æ–‡ç¿»è­¯åŠŸèƒ½ã€‚

[![Version](https://img.shields.io/badge/version-1.2.0-blue.svg)](https://github.com/code-nomad365/my-ai-app)
[![License](https://img.shields.io/badge/license-Private-red.svg)](LICENSE)
[![Netlify](https://img.shields.io/badge/deploy-Netlify-00C7B7.svg)](https://www.netlify.com)

## ğŸŒŸ åŠŸèƒ½ç‰¹é»

- **æ™ºèƒ½çŸ­æ–‡ç”Ÿæˆ**: æ ¹æ“šç”¨æˆ¶è¼¸å…¥çš„è‹±æ–‡å–®è©ï¼ŒAI è‡ªå‹•ç”Ÿæˆé€£è²«çš„ 2-3 å¥çŸ­æ–‡
- **èªéŸ³åˆæˆ (TTS)**: ä½¿ç”¨ Google Gemini TTS å°‡ç”Ÿæˆçš„çŸ­æ–‡è½‰æ›ç‚ºè‡ªç„¶æµæš¢çš„èªéŸ³
- **ä¸­æ–‡ç¿»è­¯**: ä¸€éµç¿»è­¯è‹±æ–‡çŸ­æ–‡ç‚ºç¹é«”ä¸­æ–‡
- **å–®è©é«˜äº®**: è‡ªå‹•æ¨™è¨˜ç”¨æˆ¶è¼¸å…¥çš„å–®è©ï¼Œæ–¹ä¾¿å­¸ç¿’
- **éŸ¿æ‡‰å¼è¨­è¨ˆ**: æ”¯æŒæ‰‹æ©Ÿã€å¹³æ¿å’Œæ¡Œé¢è¨­å‚™

## ğŸš€ v1.2.0 æ›´æ–°å…§å®¹

### å®‰å…¨æ€§å¢å¼·
- âœ… æ·»åŠ  Content Security Policy (CSP) é˜²è­·
- âœ… ä¿®å¾© XSS æ¼æ´ï¼Œä½¿ç”¨å®‰å…¨çš„æ–‡æœ¬è½‰ç¾©
- âœ… å¯¦ç¾ Object URL è‡ªå‹•æ¸…ç†ï¼Œé˜²æ­¢å…§å­˜æ´©æ¼
- âœ… API é‡‘é‘°ä½¿ç”¨æ›´å®‰å…¨çš„æ–¹å¼è™•ç†

### æ€§èƒ½å„ªåŒ–
- âš¡ æ­£å‰‡è¡¨é”å¼ç·©å­˜ï¼Œæ¸›å°‘é‡è¤‡ç·¨è­¯
- âš¡ å„ªåŒ– Base64 è§£ç¢¼éŒ¯èª¤è™•ç†
- âš¡ æ”¹é€² PCM åˆ° WAV éŸ³é »è½‰æ›æ•ˆç‡
- âš¡ æ·»åŠ è«‹æ±‚è¶…æ™‚æ©Ÿåˆ¶ï¼ˆ30-60 ç§’ï¼‰

### éŒ¯èª¤è™•ç†æ”¹é€²
- ğŸ”§ æ‰€æœ‰ JSON è§£æéƒ½æœ‰ try-catch ä¿è­·
- ğŸ”§ è©³ç´°çš„éŒ¯èª¤æ—¥èªŒè¨˜éŒ„
- ğŸ”§ å‹å¥½çš„ç”¨æˆ¶éŒ¯èª¤æç¤º
- ğŸ”§ API è«‹æ±‚è‡ªå‹•é‡è©¦ï¼ˆæœ€å¤š 3 æ¬¡ï¼‰

### ä»£ç¢¼é‡æ§‹
- ğŸ“¦ å‰µå»ºå…±ç”¨ `utils.js` æ¨¡çµ„ï¼Œæ¶ˆé™¤ 85% ä»£ç¢¼é‡è¤‡
- ğŸ“¦ çµ±ä¸€çš„éŒ¯èª¤è™•ç†å’Œé©—è­‰é‚è¼¯
- ğŸ“¦ æ”¹é€²ä»£ç¢¼å¯è®€æ€§å’Œå¯ç¶­è­·æ€§

### è¼¸å…¥é©—è­‰
- ğŸ›¡ï¸ æœ€å¤§è¼¸å…¥é•·åº¦é™åˆ¶ï¼ˆ500 å­—ç¬¦ï¼‰
- ğŸ›¡ï¸ æœ€å¤§å–®è©æ•¸é™åˆ¶ï¼ˆ50 å€‹ï¼‰
- ğŸ›¡ï¸ å¾Œç«¯æ–‡æœ¬é•·åº¦é©—è­‰ï¼ˆprompt: 5000, TTS: 3000ï¼‰

### æ¸¬è©¦è¦†è“‹
- âœ… å®Œæ•´çš„å–®å…ƒæ¸¬è©¦å¥—ä»¶
- âœ… é›†æˆæ¸¬è©¦è¦†è“‹é—œéµæµç¨‹
- âœ… æ¸¬è©¦æ–‡æª”å’Œæœ€ä½³å¯¦è¸æŒ‡å—

## ğŸ“‹ ç³»çµ±éœ€æ±‚

- Node.js >= 14.x
- npm >= 6.x
- Google Gemini API é‡‘é‘°
- Netlify å¸³æˆ¶ï¼ˆç”¨æ–¼éƒ¨ç½²ï¼‰

## ğŸ”§ å®‰è£æ­¥é©Ÿ

### 1. å…‹éš†å°ˆæ¡ˆ

```bash
git clone https://github.com/code-nomad365/my-ai-app.git
cd my-ai-app
```

### 2. å®‰è£ä¾è³´

```bash
npm install
```

### 3. é…ç½®ç’°å¢ƒè®Šæ•¸

åœ¨ Netlify æ§åˆ¶å°ä¸­è¨­ç½®ä»¥ä¸‹ç’°å¢ƒè®Šæ•¸ï¼š

```
GEMINI_API_KEY=your_google_gemini_api_key_here
```

**ç²å– API é‡‘é‘°**:
1. è¨ªå• [Google AI Studio](https://makersuite.google.com/app/apikey)
2. å‰µå»ºæ–°çš„ API é‡‘é‘°
3. è¤‡è£½é‡‘é‘°ä¸¦æ·»åŠ åˆ° Netlify ç’°å¢ƒè®Šæ•¸

### 4. æœ¬åœ°é–‹ç™¼

```bash
# ä½¿ç”¨ Netlify CLI æœ¬åœ°é‹è¡Œ
netlify dev
```

æ‡‰ç”¨å°‡åœ¨ `http://localhost:8888` å•Ÿå‹•

## ğŸ§ª æ¸¬è©¦

### é‹è¡Œæ‰€æœ‰æ¸¬è©¦

```bash
npm test
```

### é‹è¡Œæ¸¬è©¦ä¸¦æŸ¥çœ‹è¦†è“‹ç‡

```bash
npm test -- --coverage
```

### ç›£è¦–æ¨¡å¼ï¼ˆé–‹ç™¼ä¸­ï¼‰

```bash
npm run test:watch
```

æ›´å¤šæ¸¬è©¦ä¿¡æ¯è«‹åƒè€ƒ [æ¸¬è©¦æ–‡æª”](tests/README.md)

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
my-ai-app/
â”œâ”€â”€ ai_tts_generator_v1.1.0.html  # ä¸»æ‡‰ç”¨æ–‡ä»¶ (v1.2.0)
â”œâ”€â”€ netlify/
â”‚   â””â”€â”€ functions/
â”‚       â”œâ”€â”€ generate-text.js      # æ–‡æœ¬ç”Ÿæˆ API
â”‚       â”œâ”€â”€ generate-audio.js     # èªéŸ³ç”Ÿæˆ API
â”‚       â””â”€â”€ utils.js              # å…±ç”¨å·¥å…·æ¨¡çµ„ (æ–°)
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ unit/                     # å–®å…ƒæ¸¬è©¦
â”‚   â”œâ”€â”€ integration/              # é›†æˆæ¸¬è©¦
â”‚   â””â”€â”€ README.md                 # æ¸¬è©¦æ–‡æª”
â”œâ”€â”€ netlify.toml                  # Netlify é…ç½®
â”œâ”€â”€ package.json                  # ä¾è³´å’Œè…³æœ¬
â””â”€â”€ README.md                     # æœ¬æ–‡ä»¶
```

## ğŸ”’ å®‰å…¨æ€§

### å·²å¯¦æ–½çš„å®‰å…¨æªæ–½

1. **API é‡‘é‘°ä¿è­·**
   - âœ… é‡‘é‘°åƒ…å­˜å„²åœ¨å¾Œç«¯ç’°å¢ƒè®Šæ•¸
   - âœ… å‰ç«¯æ°¸ä¸æš´éœ² API é‡‘é‘°
   - âœ… ä½¿ç”¨ Netlify Functions ä½œç‚ºå®‰å…¨ä»£ç†

2. **è¼¸å…¥é©—è­‰**
   - âœ… å‰ç«¯å’Œå¾Œç«¯é›™é‡é©—è­‰
   - âœ… é•·åº¦é™åˆ¶é˜²æ­¢ DoS æ”»æ“Š
   - âœ… é¡å‹æª¢æŸ¥å’Œæ ¼å¼é©—è­‰

3. **XSS é˜²è­·**
   - âœ… Content Security Policy (CSP)
   - âœ… æ‰€æœ‰ç”¨æˆ¶è¼¸å…¥éƒ½ç¶“éè½‰ç¾©
   - âœ… ä½¿ç”¨ `textContent` è€Œé `innerHTML`ï¼ˆé™¤é«˜äº®åŠŸèƒ½å¤–ï¼‰

4. **éŒ¯èª¤è™•ç†**
   - âœ… ä¸æ´©éœ²æ•æ„ŸéŒ¯èª¤ä¿¡æ¯
   - âœ… çµ±ä¸€çš„éŒ¯èª¤éŸ¿æ‡‰æ ¼å¼
   - âœ… è©³ç´°çš„æœå‹™ç«¯æ—¥èªŒ

## ğŸ“Š æ€§èƒ½æŒ‡æ¨™

| æŒ‡æ¨™ | v1.1.1 | v1.2.0 | æ”¹é€² |
|------|--------|--------|------|
| ä»£ç¢¼é‡è¤‡ç‡ | 85% | < 10% | â†“ 75% |
| éŒ¯èª¤è™•ç†è¦†è“‹ | 40% | 95% | â†‘ 55% |
| æ¸¬è©¦è¦†è“‹ç‡ | 0% | > 80% | â†‘ 80% |
| å®‰å…¨æ¼æ´ | 5 å€‹ | 0 å€‹ | âœ… å·²ä¿®å¾© |
| å…§å­˜æ´©æ¼ | æœ‰ | ç„¡ | âœ… å·²ä¿®å¾© |

## ğŸ¯ ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬æµç¨‹

1. **è¼¸å…¥å–®è©**
   - åœ¨æ–‡æœ¬æ¡†ä¸­è¼¸å…¥è‹±æ–‡å–®è©
   - ä½¿ç”¨é€—è™Ÿã€ç©ºæ ¼æˆ–ä¸­æ–‡é “è™Ÿåˆ†éš”
   - æœ€å¤š 50 å€‹å–®è©ï¼Œç¸½é•·åº¦ä¸è¶…é 500 å­—ç¬¦

2. **ç”ŸæˆçŸ­æ–‡**
   - é»æ“Šã€Œç”ŸæˆçŸ­æ–‡ã€æŒ‰éˆ•
   - AI å°‡ä½¿ç”¨æ‰€æœ‰è¼¸å…¥çš„å–®è©ç”Ÿæˆ 2-3 å¥é€£è²«çŸ­æ–‡
   - è¼¸å…¥çš„å–®è©æœƒè‡ªå‹•é«˜äº®é¡¯ç¤º

3. **æ’­æ”¾èªéŸ³**
   - é»æ“Šã€Œæ’­æ”¾èªéŸ³ (è‹±æ–‡)ã€æŒ‰éˆ•
   - ç³»çµ±å°‡ç”Ÿæˆè‡ªç„¶æµæš¢çš„è‹±æ–‡èªéŸ³
   - æ”¯æŒæš«åœã€èª¿æ•´éŸ³é‡ç­‰æ’­æ”¾æ§åˆ¶

4. **ç¿»è­¯ä¸­æ–‡**
   - é»æ“Šã€Œç¿»è­¯æˆä¸­æ–‡ã€æŒ‰éˆ•
   - æŸ¥çœ‹ç¹é«”ä¸­æ–‡ç¿»è­¯
   - æ–¹ä¾¿ç†è§£çŸ­æ–‡å«ç¾©

### ç¤ºä¾‹

**è¼¸å…¥**: `study, library, science, homework`

**ç”Ÿæˆçš„çŸ­æ–‡**:
> I went to the **library** to **study** **science** and complete my **homework** for the week. The quiet environment helped me focus on understanding complex scientific concepts.

## ğŸ”§ API æ–‡æª”

### POST /.netlify/functions/generate-text

ç”Ÿæˆè‹±æ–‡çŸ­æ–‡æˆ–ç¿»è­¯æ–‡æœ¬

**è«‹æ±‚é«”**:
```json
{
  "prompt": "User prompt here",
  "systemInstruction": "Optional system instruction"
}
```

**éŸ¿æ‡‰**:
```json
{
  "candidates": [
    {
      "content": {
        "parts": [
          {
            "text": "Generated text here"
          }
        ]
      }
    }
  ]
}
```

**éŒ¯èª¤éŸ¿æ‡‰**:
```json
{
  "error": {
    "message": "Error description"
  }
}
```

### POST /.netlify/functions/generate-audio

ç”ŸæˆèªéŸ³éŸ³é »

**è«‹æ±‚é«”**:
```json
{
  "text": "Text to convert to speech"
}
```

**éŸ¿æ‡‰**:
```json
{
  "candidates": [
    {
      "content": {
        "parts": [
          {
            "inlineData": {
              "data": "base64_audio_data",
              "mimeType": "audio/L16;rate=24000"
            }
          }
        ]
      }
    }
  ]
}
```

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ

**Q: API è«‹æ±‚è¶…æ™‚**
- A: æª¢æŸ¥ç¶²çµ¡é€£æ¥ï¼Œç³»çµ±è¨­ç½®äº† 30-60 ç§’è¶…æ™‚ä¸¦è‡ªå‹•é‡è©¦ 3 æ¬¡

**Q: èªéŸ³ç„¡æ³•æ’­æ”¾**
- A: ç¢ºä¿ç€è¦½å™¨æ”¯æŒ HTML5 Audioï¼Œæª¢æŸ¥ç€è¦½å™¨æ§åˆ¶å°éŒ¯èª¤ä¿¡æ¯

**Q: å–®è©æ²’æœ‰é«˜äº®**
- A: ç¢ºä¿è¼¸å…¥çš„å–®è©åœ¨ç”Ÿæˆçš„çŸ­æ–‡ä¸­å®Œæ•´å‡ºç¾

**Q: æ¸¬è©¦å¤±æ•—**
- A: é‹è¡Œ `npm install` ç¢ºä¿æ‰€æœ‰ä¾è³´å·²å®‰è£

## ğŸ› ï¸ æŠ€è¡“æ£§

### å‰ç«¯
- HTML5
- JavaScript (ES6+)
- Tailwind CSS
- Fetch API
- Web Audio API

### å¾Œç«¯
- Node.js
- Netlify Functions (Serverless)
- node-fetch

### AI æœå‹™
- Google Gemini 2.5 Flash (æ–‡æœ¬ç”Ÿæˆ)
- Google Gemini 2.5 Flash TTS (èªéŸ³åˆæˆ)

### æ¸¬è©¦
- Jest
- å–®å…ƒæ¸¬è©¦ + é›†æˆæ¸¬è©¦

## ğŸ“ˆ æœªä¾†è¨ˆåŠƒ

- [ ] æ·»åŠ æ›´å¤šèªéŸ³é¸é …ï¼ˆä¸åŒå£éŸ³ã€æ€§åˆ¥ï¼‰
- [ ] æ”¯æŒæ›´å¤šèªè¨€ç¿»è­¯
- [ ] ç”¨æˆ¶æ­·å²è¨˜éŒ„åŠŸèƒ½
- [ ] é›¢ç·šæ¨¡å¼æ”¯æŒ
- [ ] åˆ†äº«åŠŸèƒ½ï¼ˆçŸ­æ–‡å’ŒéŸ³é »ï¼‰
- [ ] è‡ªå®šç¾©çŸ­æ–‡é•·åº¦
- [ ] èªéŸ³é€Ÿåº¦èª¿ç¯€

## ğŸ¤ è²¢ç»

æœ¬å°ˆæ¡ˆç›®å‰ç‚ºç§æœ‰å°ˆæ¡ˆã€‚å¦‚éœ€è²¢ç»ï¼Œè«‹è¯ç¹«å°ˆæ¡ˆç¶­è­·è€…ã€‚

## ğŸ“„ æˆæ¬Š

ç§æœ‰å°ˆæ¡ˆ - ç‰ˆæ¬Šæ‰€æœ‰ Â© 2025

## ğŸ“ è¯ç¹«æ–¹å¼

- **å°ˆæ¡ˆ**: [GitHub Repository](https://github.com/code-nomad365/my-ai-app)
- **å•é¡Œ**: è«‹åœ¨ GitHub Issues ä¸­æäº¤

---

**ç‰ˆæœ¬**: v1.2.0
**æœ€å¾Œæ›´æ–°**: 2025-11-05
**ä½œè€…**: AI Code Review Team